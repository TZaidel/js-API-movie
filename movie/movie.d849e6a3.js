!function(){var e,t=document.querySelector(".list"),n=(document.querySelector(".btn-container"),document.querySelector(".js-load-more"),1),o="https://api.themoviedb.org/3",c="d23ee7111563012a1c81428dff1d7a5f";function r(){var e=new URLSearchParams({api_key:c,page:n});return fetch("".concat(o).concat("/trending/movie/week","?").concat(e)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))}function a(e){return e.map((function(e){var t=e.id,n=e.title,o=e.vote_average,c=e.poster_path;return'<li id="'.concat(t,'" class="item">\n        <img src="https://image.tmdb.org/t/p/w200').concat(c,'">\n        <h2>').concat(n,'</h2>\n        <p class="vote">').concat(o.toFixed(1),'</p>\n        <button class="more-btn">Read more...</button>\n        </li>')})).join("")}function i(){document.querySelectorAll(".more-btn").forEach((function(e){e.addEventListener("click",s)}))}function s(t){var n,r=t.target.closest(".item");(n=+r.id,fetch("".concat(o,"/movie/").concat(n,"?api_key=").concat(c)).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}))).then((function(t){console.log(t),(e=basicLightbox.create('<div class="modal-box">\n                <img src="https://image.tmdb.org/t/p/w200'.concat(t.poster_path,'">\n                <h2>').concat(t.title,"</h2>\n                <p>").concat(t.overview,"</p></div>\n                "))).show()})).catch((function(e){console.log("error onClick",e)}))}window.addEventListener("keydown",(function(t){"Escape"===t.code&&e&&e.close()}
//!axios
//!--------async-await
//!---------infinity scroll
));var u=document.querySelector(".guard"),l=new IntersectionObserver((function(e,o){console.log(e),e.forEach((function(e){e.isIntersecting&&(n+=1,r().then((function(n){console.log(n),t.insertAdjacentHTML("beforeend",a(n.results)),i(),n.page>=n.total_pages&&o.unobserve(e.target)})))}))}),{root:null,rootMargin:"200px",threshold:0});r(n=1).then((function(e){console.log(e),t.insertAdjacentHTML("beforeend",a(e.results)),i(),e.page<3&&l.observe(u)})).catch((function(e){return console.log("error in fetchMovie()",e)}))}();
//# sourceMappingURL=movie.d849e6a3.js.map
