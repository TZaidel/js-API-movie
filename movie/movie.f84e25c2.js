!function(){var t,e=document.querySelector(".list"),n=(document.querySelector(".btn-container"),document.querySelector(".js-load-more"),1),o="https://api.themoviedb.org/3",c="d23ee7111563012a1c81428dff1d7a5f";function r(){var t=new URLSearchParams({api_key:c,page:n});return fetch("".concat(o).concat("/trending/movie/week","?").concat(t)).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}))}function a(t){return t.map((function(t){var e=t.id,n=t.title,o=t.vote_average,c=t.poster_path;return'<li id="'.concat(e,'" class="item">\n            <img src="https://image.tmdb.org/t/p/w200').concat(c,'">\n            <h2>').concat(n,'</h2>\n            <p class="vote">').concat(o.toFixed(1),'</p>\n            <button class="more-btn">Read more...</button>\n        </li>')})).join("")}function i(){document.querySelectorAll(".more-btn").forEach((function(t){t.addEventListener("click",s)}))}function s(e){var n,r=e.target.closest(".item");(n=+r.id,fetch("".concat(o,"/movie/").concat(n,"?api_key=").concat(c)).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}))).then((function(e){(t=basicLightbox.create('<div class="modal-box">\n                <img src="https://image.tmdb.org/t/p/w200'.concat(e.poster_path,'">\n                <h2>').concat(e.title,"</h2>\n                <p>").concat(e.overview,"</p></div>\n                "))).show()})).catch((function(t){console.log("error onClick",t)}))}window.addEventListener("keydown",(function(e){"Escape"===e.code&&t&&t.close()}
//!axios
//!--------async-await
//!---------infinity scroll
));var u=document.querySelector(".guard"),l=new IntersectionObserver((function(t,o){console.log(t),t.forEach((function(t){t.isIntersecting&&(n+=1,r().then((function(n){console.log(n),e.insertAdjacentHTML("beforeend",a(n.results)),i(),n.page>=n.total_pages&&o.unobserve(t.target)})))}))}),{root:null,rootMargin:"200px",threshold:0});r(n=1).then((function(t){console.log(t),e.insertAdjacentHTML("beforeend",a(t.results)),i(),t.page<3&&l.observe(u)})).catch((function(t){return console.log("error in fetchMovie()",t)}))}();
//# sourceMappingURL=movie.f84e25c2.js.map
