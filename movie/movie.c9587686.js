const e=document.querySelector(".list");document.querySelector(".btn-container"),document.querySelector(".js-load-more");let t,o=1;function n(){const e=new URLSearchParams({api_key:"d23ee7111563012a1c81428dff1d7a5f",page:o});return fetch(`https://api.themoviedb.org/3/trending/movie/week?${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}function r(e){return e.map((({id:e,title:t,vote_average:o,poster_path:n})=>`<li id="${e}" class="item">\n        <img src="https://image.tmdb.org/t/p/w200${n}">\n        <h2>${t}</h2>\n        <p class="vote">${o.toFixed(1)}</p>\n        <button class="more-btn">Read more...</button>\n        </li>`)).join("")}function c(){document.querySelectorAll(".more-btn").forEach((e=>{e.addEventListener("click",s)}))}function s(e){const o=e.target.closest(".item");var n;(n=+o.id,fetch(`https://api.themoviedb.org/3/movie/${n}?api_key=d23ee7111563012a1c81428dff1d7a5f`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))).then((e=>{console.log(e),t=basicLightbox.create(`<div class="modal-box">\n                <img src="https://image.tmdb.org/t/p/w200${e.poster_path}">\n                <h2>${e.title}</h2>\n                <p>${e.overview}</p></div>\n                `),t.show()})).catch((e=>{console.log("error onClick",e)}))}window.addEventListener("keydown",(function(e){"Escape"===e.code&&t&&t.close()}
//!axios
//!--------async-await
//!---------infinity scroll
));const i=document.querySelector(".guard"),a=new IntersectionObserver((function(t,s){console.log(t),t.forEach((t=>{t.isIntersecting&&(o+=1,n().then((o=>{console.log(o),e.insertAdjacentHTML("beforeend",r(o.results)),c(),o.page>=o.total_pages&&s.unobserve(t.target)})))}))}),{root:null,rootMargin:"200px",threshold:0});n(o=1).then((t=>{console.log(t),e.insertAdjacentHTML("beforeend",r(t.results)),c(),t.page<3&&a.observe(i)})).catch((e=>console.log("error in fetchMovie()",e)));
//# sourceMappingURL=movie.c9587686.js.map
